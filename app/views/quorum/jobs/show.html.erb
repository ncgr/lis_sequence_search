<div id="show">
  <h1>LIS Sequence Search Results</h1>
  <p class="small right"><%= link_to raw("Search Again &raquo;"), :jobs %></p>
  <div id="results" class="ui-widget ui-widget-content ui-corner-all">
    <div id="results-menu" class="ui-widget-header ui-corner-all">
      <span id="menu-loading">
        <p>Searching... <%= image_tag "quorum/loading.gif" %></p>
      </span>

      <span id="algorithms"></span>
      <button id="view">view selected</button>

      <span id="tools">
        <button id="remove-filters">remove filter(s)</button>

        <span>
          <button id="filters">select filter</button>
        </span>
        <ul>
          <li><a href="#" id="top-hits">top hit(s)</a></li>
          <li><a href="#" id="top-hits-per-ref">top hit(s) per reference</a></li>
          <li><a href="#" id="top-hits-per-ref-seq">top hit(s) per reference sequence</a></li>
        </ul>

        <input size=5 type="text" name="evalue" id="evalue" value="" placeholder="Evalue" />
        <button id="filter-evalue">filter</button>

        <span>
          <button id='view-tree'>view as</button>
        </span>
        <ul id="views">
          <li id="cmtv"><a href="#">cmtv</a></li>
          <li id="tab"><a href="#">tab delimited</a></li>
        </ul>
      </span>
    </div>
    <div id="search-results"></div>
  </div>

  <div id="detailed_report_dialog" title="Report Details"></div>
</div>
<div id="quorum">
  <hr class="big" />
  <p>
    Powered by <%= link_to "Quorum v#{Quorum::VERSION}", "https://github.com/ncgr/quorum" %>
  </p>
</div>

<%= render :partial => "quorum/jobs/templates/blast_detailed_report_template" %>
<%= render :partial => "quorum/jobs/templates/table_view_template" %>

<script type="text/javascript">
  $(function() {
    QUORUM.pollResults(LSS.collectResults, LSS);

    // Width and height for menu.
    var resultsWidth = $('#results').outerWidth(),
        aboveHeight = $('#results-menu').outerHeight();

    // Update the width on click.
    $('#view').click(function() {
      var scrollBar = 12;
      resultsWidth = $('#results').outerWidth() - scrollBar;
    });

    // Enable fixed position menu.
    $(window).scroll(function() {
      if ($(window).scrollTop() > aboveHeight){
        $('#results-menu').addClass('fixed').css('top','0')
        .css('width',resultsWidth + 'px');
      } else {
        $('#results-menu').removeClass('fixed')
        .css('width','100%');
      }
    });
  });
</script>
